<div class="board_detail_box board_fbcc" (click)="board.closeBoardCard()">
  <div
    id="board_detail_card"
    class="board_detail_card"
    (click)="board.notClose($event); taskPg.closeAssignedToField()"
  >
    <div class="board_fbsbc">
      @if(!board.editTask) {
      <div
        id="'Card_story' + id"
        class="board_detail_header board_fbcc"
        [style.background-color]="story_bg"
      >
        {{ story }}
      </div>
      }
      <div class="board_detail_fixed_close">
        <img
          (click)="board.notClose($event)"
          (click)="board.closeBoardCard()"
          src="assets/img/Close.svg"
          alt=""
        />
      </div>
    </div>
    <div id="board_detail_box_content">
      @if(!board.editTask) {
      <div class="board_detail_headline">
        {{ headline }}
      </div>
      <div class="board_detail_text">
        {{ text }}
      </div>
      <div class="board_fbfb board_detail_date_prio">
        <div [style.width.px]="130">Due date:</div>
        <div>
          {{ date }}
        </div>
      </div>
      <div class="board_fbfb board_detail_date_prio">
        <div [style.width.px]="130">Priority:</div>
        <div class="board_fbcc">
          {{ priority }}
          <img [src]="priority_img" alt="" />
        </div>
      </div>
      <div
        id="'board-card-users' + id"
        class="board_dfcfsco board_detail_date_prio"
      >
        @if(board.clickedTask.assigned_to.length > 0) { Assigned to: @for(user
        of board.clickedTask.assigned_to; track index; let index = $index) {
        <app-task-card-dialog-user [userId]="user"></app-task-card-dialog-user>
        } }
      </div>
      <div
        id="'board-card-subtasks' + id"
        class="board_dfcfsco board_detail_date_prio"
      >
        @if(board.clickedTask.subtasks.length > 0) { Subtasks @for (subtask of
        board.clickedTask.subtasks; track subtask.index; let index = $index) {
        <app-task-card-dialog-subtask
          [subtask]="subtask"
          [index]="index"
        ></app-task-card-dialog-subtask>
        } }
      </div>
      } @else if(board.editTask) {
      <app-add-task-field></app-add-task-field>
      }
    </div>
    @if(!board.editTask) {
    <div class="board_dfec board_detail_del_edit" [style.margin-top.px]="30">
      <div
        id="board_card_bt_delete"
        (click)="board.deleteTask(board.clickedTask.id)"
        class="board_dfcb"
      >
        <img src="assets/img/delete.svg" alt="" />Delete
        <img src="assets/img/stroked_vertically.svg" alt="" />
      </div>
      <div id="board_card_bt_edit" (click)="openEditTask()" class="board_dfcb">
        <img src="assets/img/edit.svg" alt="" />Edit
      </div>
    </div>
    }
  </div>
</div>
